{% extends 'base.html' %}

{% block content %}
<main class="container mt-4">
  <h1 class="mb-4 text-center">Resultados de búsqueda</h1>

    <form method="get" class="mb-4">
    <div class="row justify-content-center">
        <div class="col-md-3">
        <div class="input-group">
            {{ form.nombre }}
            <button type="submit" class="btn btn-dark">Buscar</button>
        </div>
        </div>
    </div>
    </form>

  {% if estudiantes_data %}
    <div class="row">
      {% for item in estudiantes_data %}
        <div class="col-md-4 mb-4">
          <div class="card bg-dark text-white h-100">
            <div class="card-body">
              <h4 class="card-title text-capitalize">
                {{ item.estudiante.nombre }} {{ item.estudiante.apellido }}
              </h4>
              <table class="table table-dark table-sm mt-3">
                <thead>
                  <tr class="table-active">
                    <th>Materia</th>
                    <th>Calificación</th>
                  </tr>
                </thead>
                <tbody>
                  {% for nota in item.notas %}
                  <tr>
                    <td>{{ nota.materia }}</td>
                    <td>{{ nota.calificacion }}</td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="2">Sin notas registradas.</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center mt-5">No se encontraron estudiantes con ese nombre.</p>
  {% endif %}
</main>
{% endblock %}
